use instant::backend::interpret;
use instant::frontend::parse;
use std::error::Error;
use std::fs::File;
use std::io::{BufRead, BufReader};

fn main() -> Result<(), Box<dyn Error>> {
    let filename = std::env::args().nth(1).expect("Filename arg missing");

    let f = File::open(filename)?;
    let reader = BufReader::new(f);

    let lines = reader.lines().map(|res| res.expect("IO error"));

    interpret(parse(lines));

    Ok(())
}
